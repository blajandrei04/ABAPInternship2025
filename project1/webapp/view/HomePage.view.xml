<mvc:View
    xmlns:form="sap.ui.layout.form"
    controllerName="project1.controller.HomePage"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
>
    <Page
        title="{i18n>UserTitle} {user>/FULL_NAME}"
        id="employeeResumePage"
        showNavButton="true"
        navButtonPress=".onNavBack"
    >
        <content>
            <HBox
                justifyContent="End"
                alignItems="Center"
                renderType="Bare"
            >
                <Button
                    text="{i18n>changePasswordButton}"
                    press="onChangePasswordPress"
                    id="changePasswordButton"
                    icon="sap-icon://BusinessSuiteInAppSymbols/icon-cell-lock"
                    class="sapUiTinyMarginEnd"
                />
                <Button
                    text="{i18n>logoutButton}"
                    press=".onLogoutPress"
                    icon="sap-icon://undo"
                    id="logoutButton"
                />
            </HBox>
            <IconTabBar
                id="iconTabBar"
                headerBackgroundDesign="Transparent"
                class="sapUiResponsiveContentPadding"
                select=".onTabSelect"
                selectedKey="{view>/selectedTabKey}"
            >
                <items>
                    <IconTabFilter
                        id="MyTeamTab"
                        text="{i18n>MyTeamTab}"
                        key="Info"
                        icon="sap-icon://hint"
                        iconColor="Neutral"
                    >
                        <VBox class="sapUiSmallMargin">
                            <Table
                                id="myTeamTable"
                                items="{team>/MyTeam}"
                            >
                                <columns>
                                    <Column>
                                        <Text text="{i18n>FirstName}" />
                                    </Column>
                                    <Column>
                                        <Text text="{i18n>LastName}" />
                                    </Column>
                                    <Column>
                                        <Text text="{i18n>careerLevel}" />
                                    </Column>
                                </columns>
                                <items>
                                    <ColumnListItem>
                                        <cells>
                                            <Text text="{team>FIRST_NAME}" />
                                            <Text text="{team>LAST_NAME}" />
                                            <Text text="{team>CAREER_LEVEL}" />
                                        </cells>
                                    </ColumnListItem>
                                </items>
                            </Table>
                        </VBox>
                    </IconTabFilter>
                    <IconTabFilter
                        id="360tab"
                        text="{i18n>360tab}"
                        key="360FB"
                        icon="sap-icon://form"
                        iconColor="Critical"
                    >
                        <content>
                            <HBox>
                                <VBox width="{= ${view>/fbVisible} ? '40%' : '100%'}" class="sapUiSmallMarginEnd">
                                    <HBox justifyContent="End">
                                        <DatePicker
                                            id="DP2"
                                            placeholder="Enter Date"
                                            change="onFbDateChange"
                                            class="sapUiSmallMarginBottom"
                                            width="140px"
                                        />
                                        <SearchField 
                                            id="fbReceiverSearchField"
                                            placeholder="Filter by Receiver Name" 
                                            liveChange="onFbReceiverSearch"
                                            class="sapUiSmallMarginBegin"
                                            width="200px"
                                        />
                                        <ComboBox
                                            id="combobox3"
                                            placeholder="{i18n>SelectStatus}"
                                            width="170px"
                                            items="{localData>/FbStatus}"
                                            selectionChange="onFbStatusFilterChange"
                                        >
                                            <core:Item
                                                key="{localData>key}"
                                                text="{localData>text}"
                                            />
                                        </ComboBox>
                                        <Button
                                            text="New feedback"
                                            press="onNewFeedback"
                                        />
                                    </HBox>
                                    <Table
                                        id="FbTable"
                                        items="{fbData>/Feedbacks}"
                                        mode="SingleSelectMaster"
                                        selectionChange="onFbSelect"
                                    >
                                        <columns>
                                            <Column>
                                                <Text text="{i18n>senderColumn}" />
                                            </Column>
                                            <Column>
                                                <Text text="{i18n>receiverColumn}" />
                                            </Column>
                                            <Column>
                                                <Text text="{i18n>date}" />
                                            </Column>
                                        </columns>
                                        <items>
                                            <ColumnListItem type="Active">
                                                <cells>
                                                    <Text text="{fbData>SENDER_ID}" />
                                                    <Text text="{fbData>RECEIVER_ID}" />
                                                    <Text text="{fbData>FB_DATE}" />
                                                </cells>
                                            </ColumnListItem>
                                        </items>
                                    </Table>
                                </VBox>

                                <VBox width="60%" visible="{view>/fbVisible}">
                                    <Panel headerText="Feedback Details" class="sapUiResponsiveMargin">
                                        <form:SimpleForm
                                            id="fbDetailsForm"
                                            editable="false"
                                            layout="ResponsiveGridLayout"
                                            labelSpanL="4"
                                            labelSpanM="4"
                                            emptySpanL="0"
                                            emptySpanM="0"
                                            columnsL="1"
                                            columnsM="1"
                                            class="sapUiNoContentPadding"
                                        >
                                            <Label text="{i18n>senderColumn}" />
                                            <Text text="{view>/selectedFeedback/SENDER_ID}" />

                                            <Label text="{i18n>receiverColumn}" />
                                            <Text text="{view>/selectedFeedback/RECEIVER_ID}" />

                                            <Label text="{i18n>projectName}" />
                                            <Text text="{view>/selectedFeedback/PROJECT_ID}" />

                                            <Label text="{i18n>rating}" />
                                            <Text text="{view>/selectedFeedback/FB_RATING}" />

                                            <Label text="{i18n>date}" />
                                            <Text text="{view>/selectedFeedback/FB_DATE}" />

                                            <Label text="{i18n>status}" />
                                            <Text text="{view>/selectedFeedback/FB_STATUS}" />
                                            
                                            <Label text="{i18n>expertiseComment}" />
                                            <Text text="{view>/selectedFeedback/COMMENT}" />
                                        </form:SimpleForm>
                                    </Panel>
                                </VBox>
                            </HBox>
                        </content>
                    </IconTabFilter>
                    <IconTabFilter
                        id="pegTab"
                        text="{i18n>pegTab}"
                        key="Pegs"
                        icon="sap-icon://form"
                        iconColor="Positive"
                    >
                        <HBox justifyContent="End">
                            <DatePicker
                                id="DP1"
                                placeholder="Enter Date"
                                change="onDateChange"
                                class="sapUiSmallMarginBottom"
                                width="140px"
                            />
                            <ComboBox
                                id="combobox1"
                                placeholder="{i18n>SelectStatus}"
                                width="170px"
                                items="{localData>/PegStatus}"
                                selectionChange=".onPegStatusFilterChange"
                            >
                                <core:Item
                                    key="{localData>key}"
                                    text="{localData>text}"
                                />
                            </ComboBox>
                            <Button
                                icon="sap-icon://request"
                                text="Request PEG"
                                type="Transparent"
                                press="onRequestPeg"
                                visible="{= ${user>/SU} === 'FALSE' }"
                            />
                        </HBox>
                        <Table
                            id="pegTable"
                            items="{pegData>/Pegs}"
                        >
                            <columns>
                                <Column>
                                    <Text text="{i18n>projectName}" />
                                </Column>
                                <Column>
                                    <Text text="{i18n>username}" />
                                </Column>
                                <Column>
                                    <Text text="{i18n>date}" />
                                </Column>
                                <Column>
                                    <Text text="{i18n>status}" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem
                                    type="Active"
                                    press="onPegPressed"
                                >
                                    <cells>
                                        <Text text="{pegData>PROJECT_ID}" />
                                        <Text text="{pegData>RECEIVER_ID}" />
                                        <Text text="{pegData>FB_DATE}" />
                                        <Text text="{pegData>FB_STATUS}" />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </IconTabFilter>
                    <IconTabFilter
                        id="MyProfileTab"
                        text="{i18n>MyProfileTab}"
                        key="MyProfile"
                        icon="sap-icon://person-placeholder"
                        iconColor="Default"
                    >
                        <VBox
                            class="sapUiSmallMargin sapUiResponsiveMargin"
                            height="110%"
                            alignItems="Start"
                            width="500px"
                        >
                            <Panel
                                width="150%"
                                headerText="{i18n>MyProfileTab}"
                                class="sapUiNoContentPadding sapUiResponsiveMargin"
                            >
                                <form:SimpleForm
                                    layout="ResponsiveGridLayout"
                                    editable="false"
                                    class="sapUiResponsiveMargin"
                                    width="60%"
                                    binding="{user>/}"
                                >
                                    <Label
                                        text="{i18n>FirstName}"
                                        width="90%"
                                    />
                                    <Text text="{user>FIRST_NAME}" />

                                    <Label
                                        text="{i18n>LastName}"
                                        width="90%"
                                    />
                                    <Text text="{user>LAST_NAME}" />

                                    <Label
                                        text="{i18n>Email}"
                                        width="90%"
                                    />
                                    <Text text="{user>EMAIL}" />

                                    <Label
                                        text="{i18n>careerLevel}"
                                        width="90%"
                                    />
                                    <Text text="{user>CAREER_LEVEL}" />

                                    <Label
                                        text="{i18n>Department}"
                                        width="90%"
                                    />
                                    <Text text="{user>TEAM_ID}" />
                                </form:SimpleForm>
                            </Panel>
                        </VBox>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
    </Page>
</mvc:View>